# 谈谈线程的生命周期和状态

1. 新建（New）：线程对象被创建后，就进入了新建状态。例如，`Thread thread = new Thread();`

2. 就绪（Runnable）：当调用线程对象的start()方法（`thread.start();`），线程就进入就绪状态。处于就绪状态的线程，随时可能被CPU调度执行。

3. 运行（Running）：CPU开始调度线程，线程开始执行run()方法中的代码，此时线程处于运行状态。

4. 阻塞（Blocked）：线程在运行过程中，如果遇到阻塞状态（如等待用户输入、文件读写、获取锁等），就会进入阻塞状态。在完成阻塞操作之后，线程重新进入就绪状态，等待CPU调度。

5. 等待（Waiting）：线程执行了wait()方法，进入等待状态，会释放占有的所有资源，等待其他线程调用notify()或notifyAll()方法来唤醒。或者调用join()方法等待其他线程完成。

6. 超时等待（Timed Waiting）：线程执行了sleep(long millis)方法，或者调用wait(long millis), join(long millis)等方法，进入超时等待状态，这是线程在指定的时间内处于等待状态，时间结束后，线程重新进入就绪状态。

7. 终止（Terminated）：线程的run()方法执行完毕，或者线程中断，线程就进入终止状态。


# 什么是线程上下文切换？

线程上下文切换是指操作系统保存当前线程的状态并恢复另一个线程的状态的过程。线程的状态包括程序计数器、栈信息等。当线程从占用CPU状态退出时，可能会发生上下文切换。这可能是因为线程主动让出CPU（例如，调用了sleep()或wait()方法）、时间片用完（操作系统需要防止一个线程或进程长时间占用CPU，导致其他线程或进程饿死）、调用了阻塞类型的系统中断（例如，请求IO，线程被阻塞）或线程被终止或结束运行。

在上下文切换过程中，操作系统需要保存当前线程的状态，以便在线程下次占用CPU时恢复现场，并加载下一个将要占用CPU的线程的状态。这就是所谓的“上下文切换”。

上下文切换是现代操作系统的基本功能，但每次上下文切换都需要保存和恢复信息，这会占用CPU和内存等系统资源，从而导致效率损耗。如果频繁进行上下文切换，可能会导致整体效率降低。